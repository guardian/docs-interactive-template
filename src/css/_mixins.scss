//
//  Function to create an optimized svg url
//

//
//  Function to replace characters in a string
//
@function str-replace($string, $search, $replace: '') {
    $index: str-index($string, $search);
    @if $index {
        @return str-slice($string, 1, $index - 1) + $replace +
        str-replace(str-slice($string, $index +
        str-length($search)), $search, $replace);
    }
    @return $string;
}

@function svg-url($svg){
    //
    //  Chunk up string in order to avoid
    //  "stack level too deep" error
    //
    $encoded:'';
    $slice: 2000;
    $index: 0;
    $loops: ceil(str-length($svg)/$slice);
    @for $i from 1 through $loops {
        $chunk: str-slice($svg, $index, $index + $slice - 1);
        //
        //   Encode (may need a few extra replacements)
        //
        $chunk: str-replace($chunk,'"','\'');
        $chunk: str-replace($chunk,'<','%3C');
        $chunk: str-replace($chunk,'>','%3E');
        $chunk: str-replace($chunk,'&','%26');
        $chunk: str-replace($chunk,'#','%23');
        $encoded: #{$encoded}#{$chunk};
        $index: $index + $slice;
    }
    @return url("data:image/svg+xml;charset=utf8,#{$encoded}");
}


@mixin dividers {
  &:before {
    content: '';
    width: 100%;
    height: 1px;
    background-color: $c-divider;
    margin: 5px 0 4px 0;
    display:block;
    }
}

@mixin divider-invisible {
  &:before {
    background-color: transparent;
  }
}

@mixin icon-showmore {
  &:after {
    content: '';
    width: 13px;
    height: 13px;
    background-image: svg-url('<svg width="13" height="13" viewBox="0 1 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="translate(0 1)"><ellipse fill="#BDBDBD" opacity=".6" cx="6.5" cy="6.5" rx="6.5" ry="6.5"/><path fill="#000" d="M6 7l-3.97-.2v-.6L6 6l.2-3.97h.6L7 6l3.97.2v.6L7 7l-.2 3.97h-.6"/></g></svg>');
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 100%;
    display: block;
    float:left;
    margin: 3px 0 0;
  }
}

@mixin icon-showless {
  &:after {
    content: '';
    width: 13px;
    height: 13px;
    background-image: svg-url('<svg width="13" height="13" viewBox="0 21 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="translate(0 21)"><ellipse fill="#BDBDBD" opacity=".6" cx="6.5" cy="6.5" rx="6.5" ry="6.5"/><path fill="#000" d="M6 7l-3.97-.2v-.6L6 6h1l3.97.2v.6L7 7"/></g></svg>');
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 100%;
    display: block;
    float:left;
    margin: 3px 0 0;
  }
}

@mixin icon-play-small {
  &:before {
    content: '';
    background-image: svg-url('<svg width="32" height="32" viewBox="-1 -1 34 34" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><rect fill="#FEBB00" width="32" height="32" rx="16"/><path fill="#333" d="M25 16.332L11.498 22 11 21.646V10.4l.498-.4L25 15.712"/></g></svg>');
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 100%;
    display: block;
    width: 32px;
    height: 32px;
    position: absolute;
    top: -1px;
    left: -2px;
  }
}

@mixin icon-play {
  &:after {
    content: '';
    width: 45px;
    height: 37.5px;
    background-image: svg-url('<svg width="45" height="37.5" viewBox="1404 6229 20 17" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-rule="evenodd" d="M1424 6237.97l-19.29 8.03-.71-.502v-15.933l.71-.565 19.29 8.092"/></svg>');
    position: absolute;
    top: 50%;
    left: 30px;
    transform: translateY(-50%);
  }
}

@mixin icon-timestamp {
  &:after {
    content: '';
    width: 12px;
    height: 12px;
    background-image: svg-url('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path d="M12 6c0 3.3-2.7 6-6 6C2.7 12 0 9.3 0 6 0 2.7 2.7 0 6 0 9.3 0 12 2.7 12 6zM6.4 1.1H5.6L5.2 6.2l0.8 0.7 4.2-0.4V5.7L6.8 5.5 6.4 1.1z" fill="#bdbdbd"/></svg>');
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 100%;
    display: block;
    float: left;
    margin-right: 4px;
    margin-top: 2px;
  }
}

@mixin icon-share {
  &:after {
    content: '';
    position: absolute;
    width: 12px;
    height: 12px;
    background-image: svg-url('<svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 11.1 10.9"><path d="M11.1 9.3c0 0.9-0.7 1.6-1.6 1.6 -0.9 0-1.6-0.7-1.6-1.6 0-0.1 0-0.1 0-0.2L2.9 6.6c-0.3 0.3-0.7 0.5-1.1 0.5 -0.9 0-1.7-0.7-1.7-1.6 0-0.9 0.7-1.6 1.7-1.6 0.4 0 0.8 0.2 1.1 0.5l4.9-2.4C7.8 1.8 7.8 1.7 7.8 1.6 7.8 0.7 8.5 0 9.4 0c0.9 0 1.6 0.7 1.6 1.6 0 0.9-0.7 1.7-1.6 1.7 -0.4 0-0.8-0.2-1.1-0.4L3.4 5.3c0 0 0 0.1 0 0.2 0 0.1 0 0.2 0 0.2l4.9 2.4c0.3-0.3 0.7-0.4 1.1-0.4C10.3 7.6 11.1 8.4 11.1 9.3zM8.4 1.6c0 0.5 0.5 1 1 1 0.5 0 1-0.4 1-1 0-0.5-0.4-1-1-1C8.9 0.7 8.4 1.1 8.4 1.6zM10.4 9.3c0-0.5-0.4-1-1-1 -0.5 0-1 0.4-1 1 0 0.5 0.5 1 1 1C10 10.3 10.4 9.8 10.4 9.3z" fill="#999"/></svg>');
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 100%;
    display: block;
    @include mq(mobile) {
      top: 45%;
    }
    @include mq(mobileLandscape) {
      top: 42%;
    }
    @include mq($from:tablet) {
      top: 40%;
    }
  }
}

@mixin icon-close {
  &:before {
    cursor: pointer;
    content: '';
    position: absolute;
    top: -25px;
    right: 0;
    width: 18px;
    height: 18px;
    background-image: svg-url('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M0 1.1l1-1 7 6.3L14.9 0l1 1L9.6 8l6.3 7 -1 1L8 9.6l-7 6.3L0 14.9l6.4-6.9L0 1.1z" fill="#ECECEC"/></svg>');
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 100%;
    display: block;
  }
}

@mixin tiny-play {
  &:before {
    content: '';
    width: 12px;
    height: 12px;
    background-size: 12px 12px;
    background-repeat: no-repeat;
    background-image: svg-url('<svg width="14" height="12" viewBox="9 8 14 12" xmlns="http://www.w3.org/2000/svg"><path fill="#fb0" fill-rule="evenodd" d="M23 14.33v-.62L9.5 8l-.5.4v11.25l.5.35"/></svg>');
    display: block;
  }
}

@mixin tiny-play-dark {
  &:before {
    content: '';
    width: 12px;
    height: 12px;
    background-size: 12px 12px;
    background-repeat: no-repeat;
    background-image: svg-url('<svg width="14" height="12" viewBox="9 8 14 12" xmlns="http://www.w3.org/2000/svg"><path fill="#161616" fill-rule="evenodd" d="M23 14.33v-.62L9.5 8l-.5.4v11.25l.5.35"/></svg>');
    display: block;
  }
}

@mixin brexit-shorts-logo {
  &:after {
    content: '';
    background-image: svg-url('<svg xmlns="http://www.w3.org/2000/svg" width="205" height="123"><defs><filter id="a" width="135.9%" height="173.8%" x="-18%" y="-38.1%" filterUnits="objectBoundingBox"><feOffset in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="10" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.18 0" in="shadowBlurOuter1" result="shadowMatrixOuter1"/><feMerge><feMergeNode in="shadowMatrixOuter1"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g fill="none" fill-rule="evenodd" filter="url(#a)" transform="translate(20 20)"><path fill="#FF0" fill-rule="nonzero" d="M102.05 14.74H79.7V0L51.04 26.53 79.7 53.05V38.32h22.35"/><path fill="#00C0F2" fill-rule="nonzero" d="M51.03 26.53L22.33 0v14.74H0v23.58h22.34v14.73"/><path stroke="#FFF" stroke-width="3.3" d="M78.04 53.05L24 0m0 53.05L78.05 0" stroke-linecap="round" stroke-linejoin="round"/><path fill="#EAEAEA" d="M.48 83.06v-2.2l2.1-.5v-14l-2.1-.5v-2.2h9.18c4.54 0 6.92 1.57 6.92 4.84 0 2.2-.93 3.8-3.64 4.45v.14c3.24.4 4.56 1.9 4.56 4.7 0 3.2-2.24 5.2-7.28 5.2H.48zm6.8-2.63h2.04c2.1 0 3.17-.84 3.17-3.02 0-2.2-1.1-3.1-3.2-3.1h-2v6.2zm0-8.48h1.76c1.68 0 2.8-.65 2.8-2.75 0-2.3-1-2.9-2.82-2.9H7.28v5.65zm11.1 11.1h8.22v-2.03l-2.16-.42v-8.1c.9-.44 1.9-.67 3.25-.67.4 0 .9.03 1.2.12v-3.8c-.2-.07-.6-.12-.8-.12-1.7 0-3 1.06-3.8 2.3h-.2v-2.1l-.4-.2-5.6.67v2.1l1.8.45v9.35l-1.78.42v2.04zm18.86.38c-5.12 0-7.64-2.97-7.64-7.82 0-4.8 2.96-7.6 7.25-7.6 4.45 0 6.5 2.5 6.5 8.2h-9.27c.22 3 1.73 4.3 4.3 4.3 2 0 3.2-.3 4.26-.7V82c-1 .64-2.68 1.43-5.4 1.43zm-3.16-9.3l4.92-.17c0-2.55-.86-3.44-2.26-3.44-1.5 0-2.5.92-2.66 3.6zm9.8 8.93h6.04v-2.04l-1.4-.3 2.27-3.34L53 80.7l-1.35.4v2.06h7.76V81.1l-1.4-.4-3.5-4.9 3.5-5 1.2-.36v-2.1h-5.7v2.1l1.4.3-2.1 3.34h-.1l-2.1-3.34 1.3-.34v-2.1H44v2.08l1.46.4 3.5 4.86-3.7 5-1.45.38v2.04zm16.35 0H68v-2.04l-1.7-.42V68.22l-.42-.2-5.8.68v2.1l1.9.45v9.35l-1.75.42v2.04zM64 66.66c1.38 0 2.47-.9 2.47-2.22 0-1.34-1.1-2.2-2.46-2.2-1.3 0-2.4.86-2.4 2.2 0 1.32 1.1 2.2 2.5 2.2zm10.4 16.7c1.48 0 2.74-.4 3.38-.83v-2.16c-.44.12-.98.2-1.5.2-1.4 0-1.94-.5-1.94-1.9V70.9h3.25v-2.6h-3.3v-3.47h-3.4l-.6 3.45-2.2.73v1.9H70v8.6c0 3 1.57 4 4.4 4zm16.2.04c5.05 0 7.57-2.58 7.57-6.27 0-3.56-1.93-4.54-5.15-5.8l-1.52-.6c-1.87-.72-2.77-1.3-2.77-2.62s1.12-2 2.72-2c1.17 0 1.87.3 2.4.6l.6 2.1h2.74l-.3-4.6c-1.1-.3-2.7-.7-5.3-.7-5.1 0-7.2 2.4-7.2 5.7 0 3.28 1.6 4.5 4.4 5.66l1.5.63c2 .8 3.2 1.4 3.2 2.85 0 1.4-1 2.48-3.1 2.48-1.2 0-2-.22-2.8-.6l-.8-2.5H84l.26 5c1.45.57 3.8.96 6.1.96zm8.6-.34h7.54v-2.04l-1.46-.37v-8.9c.76-.25 1.48-.48 2.35-.48 1.43 0 2.13.45 2.13 1.9v7.48l-1.46.37v2.04h7.48v-2.04l-1.68-.42v-8.88c0-2.7-1.54-3.72-3.95-3.72-1.96 0-3.4.7-4.8 1.68h-.13v-7.4l-.42-.22-5.65.67v2.1l1.82.45V80.6l-1.77.42v2.04zm24.84.37c-4.73 0-7.48-2.97-7.48-7.65 0-4.95 3.3-7.78 7.45-7.78 4.8 0 7.5 2.83 7.5 7.6 0 4.94-3.3 7.83-7.4 7.83zm.03-2.6c1.6 0 2.85-1.1 2.85-5.02 0-4-1.3-5.2-2.94-5.2-1.62 0-2.88 1.1-2.88 5 0 4.1 1.32 5.3 2.97 5.3zm8.34 2.23h8.3v-2.04l-2.1-.42v-8.1c.9-.44 1.9-.67 3.3-.67.4 0 .9.03 1.3.12v-3.8c-.13-.07-.5-.12-.8-.12-1.6 0-2.9 1.06-3.7 2.3h-.14v-2.1l-.42-.2-5.5.67v2.1l1.83.45v9.35l-1.8.42v2.04zm17.4.3c1.5 0 2.8-.4 3.4-.83v-2.16c-.4.12-.9.2-1.5.2-1.4 0-1.9-.5-1.9-1.9V70.9h3.2v-2.6h-3.2v-3.47h-3.4l-.5 3.45-2.1.73v1.9h1.8v8.6c0 3 1.57 4 4.4 4zm9.8.07c4.6 0 6.6-2.08 6.6-5.02 0-2.1-1.1-3.5-3.9-4.3l-1.72-.4c-1.7-.4-2.26-.8-2.26-1.7 0-1 .95-1.4 2.18-1.4.96 0 1.5.2 1.9.47l.46 1.7h2.54v-3.8c-1.12-.44-2.9-.72-4.65-.72-4.26 0-6.22 2-6.22 4.75 0 2.5 1.45 3.73 4.05 4.4l1.6.43c1.57.4 2.1.77 2.1 1.8 0 1.04-.92 1.57-2.32 1.57-1 0-1.8-.28-2.2-.5l-.62-1.9h-2.6l.28 4c1.44.5 3.35.84 5 .84z"/></g></svg>');
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 100%;
    display: block;
    float: left;
    width: 164px;
    height: 92px;
  }
}

@mixin icon-info {
  &:after {
    content: '';
    width: 21px;
    height: 21px;
    background-size: 21px 21px;
    background-repeat: no-repeat;
    background-image: svg-url('<svg width="21" height="21" viewBox="99 6 21 21" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="translate(100 7)"><circle fill="#333" cx="9.5" cy="9.5" r="9.5"/><path d="M8.02 15.15c.8 0 1.7-.2 2.2-.42l.3-.9h-1.2l1.88-6.25-.18-.1-3.14.38-.3 1.06h1.07l-1.5 5.1c-.07.17-.08.3-.08.43 0 .52.4.7.95.7zm2.34-8.5c.66 0 1.26-.43 1.26-1.17 0-.57-.45-.97-1.1-.97-.65 0-1.25.47-1.25 1.2 0 .57.44.96 1.1.96z" fill="#BDBDBD"/></g></svg>');
    display: inline-block;
    vertical-align: top;
    position: relative;
    left: 4px;
  }
}
